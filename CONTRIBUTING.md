# Contributing to @clxrity/react-audio

Please review the following guidelines and familiarize yourself with the repository structure before submitting a pull request.

- [Repository Ecosystem](#repository-ecosystem)
  - [Directory Structure](#directory-structure)
- [Development Workflow](#development-workflow)
  - [Changesets](#changesets)
  - [Documentation](#documentation)
  - [Tests](#tests)
- [Requirements for Pull Requests](#requirements-for-pull-requests)
  - [Code Review Checklist](#code-review-checklist)
  - [Pull Request Guidelines](#pull-request-guidelines)

```bash
git clone https://github.com/clxrityy/react-audio.git # Clone the repository
cd react-audio # Change directory to the cloned repository
pnpm install # Install dependencies
pnpm dev # Start the development server
```

## Repository Ecosystem

- [pnpm v10](https://pnpm.io/) is used as the package manager. Please make sure to install it globally if you haven't already:
  ```bash
  npm install -g pnpm
  ```
- [Node.js v23](https://nodejs.org/en/) is used as the runtime. Please make sure to install it globally if you haven't already:
  ```bash
  nvm install 23
  ```
  - Ensure you are using the correct version of Node.js by running:
  ```bash
  nvm use
  ```
  > This will automatically switch to the version specified in the `.nvmrc` file.

This repository uses the following tools and libraries:

- [Vite](https://vite.dev/) for fast and modern frontend development.
- [React](https://reactjs.org/) for building user interfaces.
- [TypeScript](https://www.typescriptlang.org/) for static type checking.
- [Ladle](https://ladle.dev/) for developing and testing React components in isolation and for deploying documentation.
- [Changesets](https://github.com/changesets/changesets) for managing versioning and changelogs.
- [Tailwind CSS](https://tailwindcss.com/) for utility-first CSS styling.
- [Vitest](https://vitest.dev/) for unit testing.
- [ESLint](https://eslint.org/) for linting JavaScript and TypeScript code.
- [Prettier](https://prettier.io/) for code formatting.

### Directory Structure

- `src/` — Contains the source code for the project.
  - `components/` — Contains reusable components.
  - `hooks/`: Contains custom hooks.
  - `utils/` — Contains utility functions.
  - `lib/` — Contains the **component library** code (e.g., the Player component).
  - `stories/` — Contains stories for Ladle.
- `public/` — Contains static assets such as images and audio files.
- `__tests__/` — Contains test files for the project.
- `docs/` — Contains documentation files (generated by Ladle & deployed to [GitHub Pages](https://pages.github.com/)).
- `.ladle/` — Configurations for Ladle.
- `.changeset/` — Contains changeset files for versioning and changelogs.
- `scripts/` — Contains scripts for building, testing, and deploying the project.

## Development Workflow

1. **Install Dependencies**: Run `pnpm install` to install all dependencies.
2. **Run Development Server**: Use `pnpm dev` to start the development server.
3. **Run Tests**: Use `pnpm test` to run the tests.
4. **Run Linting**: Use `pnpm lint` to run ESLint and Prettier.
5. **Build for Production**: Use `pnpm build` to build the project for production.

### Changesets

This project uses [Changesets](https://github.com/changesets/changesets) for versioning and changelogs. To create a new changeset, run:

```bash
pnpm changeset
```

Make sure to follow the prompts and provide a clear description of the changes made. This will help in generating accurate changelogs and versioning.

**Note**: Unless you are an author or maintainer of this repository, please do not run the following commands:

- `pnpm changeset version` & `pnpm changeset publish`
- `pnpm release` & `pnpm patch:publish`

These commands are reserved for maintainers and will not allow you to publish your changes. Instead, please create a pull request with your changes and the maintainers will review and publish them as needed.

### Documentation

- The documentation is generated using [Ladle](https://ladle.dev/) and is located in the `docs/` directory.
- To view the documentation, run `pnpm dev` and open [http://localhost:61000/](http://localhost:61000/) in your browser.
- The documentation is automatically deployed to [GitHub Pages](https://pages.github.com/) when changes are made to the `main` branch.
- The documentation is hosted at [https://clxrityy.github.io/react-audio/](https://clxrityy.github.io/react-audio/).

Run `pnpm build:ladle` to build the documentation for production. This will generate a static version of the documentation in the `docs/` directory.

If you're interested in contributing to the documentation, please refer to the [Ladle documentation](https://ladle.dev/docs) for more information on how to create and manage stories.

- View existing stories in the `src/stories/` directory.

It is highly encouraged to add stories for any new components or features you create. This will help in maintaining a comprehensive documentation and testing environment for the project.

### Tests

- The tests are located in the `__tests__/` directory.
- To run the tests, use the command `pnpm test`.

Whenever you make changes to the code, please ensure that you run the tests to verify that everything is working as expected. This will help in maintaining the stability and reliability of the project.

If you add new features or components, please make sure to add corresponding tests for them as well.

**Note**: Pull requests with failing tests will not be accepted. Please ensure that all tests pass before submitting your changes.

---

## Requirements for Pull Requests

### Code Review Checklist

- [x] Your code follows the [ESLint](https://eslint.org/) and [Prettier](https://prettier.io/) rules defined in the project.
  - Run `pnpm lint` to check for any linting and/or formatting errors and automatically fix them.
- [x] You've added tests for any new features or components.
- [x] You've added stories for any new components or features.
- [x] You've ran `pnpm changeset` to create a changeset for your change(s).
- [x] You've ran `pnpm test` to ensure all tests pass.
- [x] You've ran `pnpm build` to ensure the project builds successfully.
- [x] You've updated the documentation if necessary.

### Pull Request Guidelines

- [x] Your pull request should be based on the `main` branch.
- [x] Your pull request should have a clear and descriptive title.
- [x] Your pull request should have a clear and descriptive description of the changes made.
  - [x] Inlcude: **WHAT** you did, **WHY** you did it, and **HOW** you did it.
  - [x] If extra context and/or external links are needed as references, they should be included in the description.
- [x] Your pull request should reference any related issues or discussions.
