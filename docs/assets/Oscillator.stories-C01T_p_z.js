import{r as i,j as e,R as m}from"./index-DNBgkSAg.js";import{B as p,I as n}from"./config-Bp8s_Tfg.js";import{c as q}from"./cn-DMRvDxO3.js";import"./dialog-BlLKB11T.js";function f({type:t="sine",frequency:s=440,gain:I=.5,isPlaying:v=!1,onFrequencyChange:N,onGainChange:h,...S}){const[w,R]=i.useState(null),c=i.useRef(null),r=i.useRef(null),d=i.useRef(null),[y,T]=i.useState(s),[g,A]=i.useState(I),[C,P]=i.useState(!1),E=()=>{if(!c.current||!C){const l=w??new AudioContext;w||R(l),c.current=w,P(!0)}else c.current.close(),c.current=null,P(!1)};return i.useEffect(()=>{var l,a,b;if(E(),v&&c.current){if(!r.current){const o=c.current,u=o.createOscillator(),x=o.createGain();u.type=t,u.frequency.setValueAtTime(y,o.currentTime),x.gain.setValueAtTime(g,o.currentTime),u.connect(x),x.connect(o.destination),u.start(),r.current=u,d.current=x}}else(l=r.current)==null||l.stop(),(a=r.current)==null||a.disconnect(),(b=d.current)==null||b.disconnect(),r.current=null,d.current=null;return()=>{var o,u,x;(o=r.current)==null||o.stop(),(u=r.current)==null||u.disconnect(),(x=d.current)==null||x.disconnect(),r.current=null,d.current=null}},[v,t,y,g]),i.useEffect(()=>{const l=()=>{c.current&&c.current.state==="suspended"&&c.current.resume()};return window.addEventListener("load",l),()=>{window.removeEventListener("load",l)}},[]),e.jsx("div",{...S,className:q("flex flex-col gap-2 items-center",S.className),children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:["Frequency: ",e.jsxs("span",{className:"font-mono",children:[y," Hz"]})]}),e.jsx("input",{className:"disabled:opacity-50 disabled:cursor-not-allowed",type:"range",min:20,max:2e3,value:y,onChange:l=>{const a=Number(l.target.value);T(a),N==null||N(a),r.current&&r.current.frequency.setValueAtTime(a,c.current.currentTime)}})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:["Gain: ",e.jsx("span",{className:"font-mono",children:g})]}),e.jsx("input",{type:"range",className:"disabled:opacity-50 disabled:cursor-not-allowed",min:0,max:1,step:.01,value:g,onChange:l=>{const a=Number(l.target.value);A(a),h==null||h(a),d.current&&d.current.gain.setValueAtTime(a,c.current.currentTime)}})]})]})})}const B={title:"Oscillator",component:f},j={type:"sine",frequency:440,gain:.5,isPlaying:!1},G=()=>{const[t,s]=m.useState(!1);return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(p,{onClick:()=>s(!t),children:t?e.jsx(n.pause,{}):e.jsx(n.play,{})}),e.jsx(f,{...j,isPlaying:t})]})},z=()=>{const[t,s]=m.useState(!1);return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(p,{onClick:()=>s(!t),children:t?e.jsx(n.pause,{}):e.jsx(n.play,{})}),e.jsx(f,{...j,type:"sawtooth",isPlaying:t})]})},D=()=>{const[t,s]=m.useState(!1);return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(p,{onClick:()=>s(!t),children:t?e.jsx(n.pause,{}):e.jsx(n.play,{})}),e.jsx(f,{...j,type:"square",isPlaying:t})]})},F=()=>{const[t,s]=m.useState(!1);return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(p,{onClick:()=>s(!t),children:t?e.jsx(n.pause,{}):e.jsx(n.play,{})}),e.jsx(f,{...j,type:"triangle",isPlaying:t})]})},H=()=>{const[t,s]=m.useState(!1);return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(p,{onClick:()=>s(!t),children:t?e.jsx(n.pause,{}):e.jsx(n.play,{})}),e.jsx(f,{...j,gain:.1,isPlaying:t})]})},U=()=>{const[t,s]=m.useState(!1);return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(p,{onClick:()=>s(!t),children:t?e.jsx(n.pause,{}):e.jsx(n.play,{})}),e.jsx(f,{...j,frequency:880,isPlaying:t})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{G as Default,U as Frequency,H as Gain,z as Sawtooth,D as Square,F as Triangle,B as default};
