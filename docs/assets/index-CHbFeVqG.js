import{j as e,r as i}from"./index-gzyuxFYO.js";import{A as G}from"./AudioSource-D2SEPCcm.js";import{I as n,C as b,B as p}from"./config-D1reRM0s.js";import{c as y}from"./cn-BuW-WfQo.js";const H=({className:l,...u})=>{const o=n.loading;return e.jsxDEV("div",{className:y("flex items-center justify-center animate-spin",l),...u,children:e.jsxDEV(o,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/Loading.tsx",lineNumber:18,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/Loading.tsx",lineNumber:11,columnNumber:9},void 0)},J=({duration:l,current_progress:u,buffered:o,color:s,...a})=>{const f=l>0?u/l*100:0,h=l>0?o/l*100:0;return e.jsxDEV("div",{className:y("relative w-60 h-2 bg-gray-300 rounded overflow-hidden",a.className),children:[e.jsxDEV("div",{className:"absolute top-0 left-0 h-full bg-gray-400 rounded transition-all duration-200",style:{width:`${h}%`}},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/Progress.tsx",lineNumber:31,columnNumber:13},void 0),e.jsxDEV("div",{className:"absolute top-0 left-0 h-full rounded transition-all duration-200",style:{width:`${f}%`,backgroundColor:s||b.primary}},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/Progress.tsx",lineNumber:37,columnNumber:13},void 0),e.jsxDEV("input",{type:"range",className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer",min:0,max:l||1,value:u||0,onChange:m=>{var x;return(x=a.onChange)==null?void 0:x.call(a,m)},...a},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/Progress.tsx",lineNumber:46,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/Progress.tsx",lineNumber:24,columnNumber:9},void 0)};function K({track:l,...u}){const{title:o,artist:s,thumbnail:a}=l;return!o&&!s&&!a?null:e.jsxDEV("div",{...u,className:y("flex flex-row items-center gap-2",u.className),children:[a&&e.jsxDEV("img",{src:a,alt:`${o} by ${s}`,className:"w-32 h-32 rounded-full"},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:22,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[o&&e.jsxDEV("h1",{className:"text-2xl font-bold",children:o},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:29,columnNumber:27},this),s&&e.jsxDEV("div",{className:"flex flex-row items-center gap-2",children:[s.thumbnail&&s.url?e.jsxDEV("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"hover:underline underline-offset-2",children:e.jsxDEV("img",{src:s.thumbnail,alt:s.name,className:"w-8 h-8 rounded-full"},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:39,columnNumber:33},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:33,columnNumber:29},this):s.thumbnail&&e.jsxDEV("img",{src:s.thumbnail,alt:s.name,className:"w-8 h-8 rounded-full"},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:47,columnNumber:33},this),e.jsxDEV("div",{className:"flex flex-col items-center gap-1",children:s.url?e.jsxDEV("a",{href:s.url,target:"_blank",rel:"noreferrer",children:s.name},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:56,columnNumber:33},this):e.jsxDEV("span",{children:s.name},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:64,columnNumber:33},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:54,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:31,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:28,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/TrackInfo.tsx",lineNumber:17,columnNumber:9},this)}function Q({volume:l,onVolumeChnge:u,className:o,color:s,...a}){return e.jsxDEV("input",{type:"range",min:0,max:1,step:.01,value:l,onChange:f=>u(parseFloat(f.target.value)),className:y("h-1 w-20 appearance-none rounded-full bg-inherit/50","range-slider:h-2 range-slider:rounded-full progress-input",o),style:{backgroundColor:`linear-gradient(to right, ${s||b.primary} ${l*100}%, ${s||b.primary} 0%)`,border:`2px solid ${s||b.primary}`},...a},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/components/ui/VolumeSlider.tsx",lineNumber:19,columnNumber:9},this)}function re({track:l,size:u=200,autoplay:o=!1,showTrackInfo:s=!1,showNextPrevControls:a=!1,showProgress:f=!0,showVolume:h=!0,audioRef:m,onNext:x,onPrev:E,color:V=b.primary,...U}){const[N,j]=i.useState(!1),[w,D]=i.useState(!1),[d,k]=i.useState(.25),[S,P]=i.useState(0),[L,C]=i.useState(0),[$,v]=i.useState(0),[r,B]=i.useState(null);m||(m=i.useRef(r)),i.useEffect(()=>{r?r.addEventListener("canplaythrough",()=>{j(!0)}):B(m.current)},[]);const O=i.useCallback(()=>{if(!(!N||!r))try{r.play(),D(!0)}catch(t){console.error(t),D(!1)}},[N]),T=i.useCallback(()=>{!N||!r||(r.pause(),D(!1))},[N]),A=i.useCallback(t=>{r&&(r.volume=t.currentTarget.volume,k(t.currentTarget.volume))},[]),F=i.useCallback(()=>{r&&(r.volume!==0?(r.volume=0,k(0)):(r.volume=.25,k(d)))},[r,d]),I=i.useCallback(t=>{const c=t.currentTarget;if(c.duration>0){for(let g=0;g<c.buffered.length;g++)if(c.buffered.start(c.buffered.length-1-g)<c.currentTime){P(c.buffered.end(c.buffered.length-1-g));break}}},[]),_=i.useCallback(t=>{v(t.currentTarget.currentTime),I(t)},[I]),z=i.useCallback(t=>{C(t.currentTarget.duration)},[]),M=i.useCallback(t=>{t.currentTarget.volume=d,j(!0)},[]),{src:W}=l,q=t=>{const c=parseFloat(t.currentTarget.value);v(c),r&&(r.currentTime=c)};return i.useEffect(()=>{if(!r)return;const t=()=>v(r.currentTime),c=()=>{r.buffered.length>0&&P(r.buffered.end(r.buffered.length-1))};return r.addEventListener("timeupdate",t),r.addEventListener("progress",c),r.addEventListener("loadedmetadata",()=>C(r.duration)),()=>{r.removeEventListener("timeupdate",t),r.removeEventListener("progress",c)}},[]),e.jsxDEV("div",{...U,className:y("flex flex-col items-center gap-4 relative",U.className),children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("audio",{ref:m,onCanPlay:M,onTimeUpdate:_,onDurationChange:z,onVolumeChange:A,onPause:T,autoPlay:o,preload:"auto",children:e.jsxDEV(G,{src:W},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:217,columnNumber:21},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:207,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-col gap-2 items-center z-30",children:[s&&e.jsxDEV(K,{track:l},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:220,columnNumber:39},this),e.jsxDEV("div",{className:"flex flex-col items-center gap-2",children:[N?w?e.jsxDEV(p,{onClick:T,children:e.jsxDEV(n.pause,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:225,columnNumber:37},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:224,columnNumber:33},this):e.jsxDEV(p,{onClick:O,children:e.jsxDEV(n.play,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:229,columnNumber:37},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:228,columnNumber:33},this):e.jsxDEV(H,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:233,columnNumber:29},this),h&&e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(p,{onClick:F,children:d===0?e.jsxDEV(n.volumeOff,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:239,columnNumber:41},this):d<.5?e.jsxDEV(n.volumeDown,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:241,columnNumber:41},this):e.jsxDEV(n.volumeUp,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:243,columnNumber:41},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:237,columnNumber:33},this),e.jsxDEV(Q,{size:u,color:V,volume:d,onVolumeChnge:t=>{r&&(r.volume=t,k(t))}},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:246,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:236,columnNumber:29},this),a&&x&&E&&e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(p,{onClick:E,children:e.jsxDEV(n.skipPrevious,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:261,columnNumber:37},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:260,columnNumber:33},this),e.jsxDEV(p,{onClick:x,children:e.jsxDEV(n.skipNext,{},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:264,columnNumber:37},this)},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:263,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:259,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:221,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:219,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:206,columnNumber:13},this),f&&e.jsxDEV(J,{color:V,duration:L,current_progress:$,buffered:S,onChange:q},void 0,!1,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:272,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/clxrity/Desktop/stuff/code/pkg (@clxrity)/react-audio/src/lib/Player/index.tsx",lineNumber:199,columnNumber:9},this)}export{re as P};
